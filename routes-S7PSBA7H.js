var ce=Object.defineProperty;var le=(e,g)=>()=>(e&&(g=e(e=0)),g);var me=(e,g)=>{for(var t in g)ce(e,t,{get:g[t],enumerable:!0})};var u=(e,g,t)=>new Promise((n,i)=>{var m=M=>{try{_(t.next(M))}catch(K){i(K)}},h=M=>{try{_(t.throw(M))}catch(K){i(K)}},_=M=>M.done?n(M.value):Promise.resolve(M.value).then(m,h);_((t=t.apply(e,g)).next())});var Pt={};me(Pt,{CustomCurrencyPipe:()=>q});import"@angular/core";import{BehaviorSubject as pe}from"rxjs";import*as Z from"@angular/core";import*as wt from"@ngx-translate/core";var q,X=le(()=>{"use strict";q=(()=>{class e{constructor(t){this.translateService=t}transform(t,n){let i=new Date(t),m={style:"currency",currency:n||"EUR"},h=new Intl.NumberFormat(this.getLocaleFromLang(this.translateService.currentLang),m).format(t),_=new pe(h);return this.translateService.onLangChange.subscribe(()=>(h=new Intl.NumberFormat(this.getLocaleFromLang(this.translateService.currentLang),m).format(t),_.next(h))),_}getLocaleFromLang(t){return t==="es"?"es-ES":"en-US"}static{this.\u0275fac=function(n){return new(n||e)(Z.\u0275\u0275directiveInject(wt.TranslateService,16))}}static{this.\u0275pipe=Z.\u0275\u0275definePipe({name:"currency",type:e,pure:!0,standalone:!0})}}return e})()});import{CommonModule as Ie}from"@angular/common";import"@angular/core";import{RouterModule as Te}from"@angular/router";import{IonicModule as Oe}from"@ionic/angular";var ft=function(e){return e.SHELL_VERSION="shellVersion",e}(ft||{}),L=function(e){return e.SHELL_DEVICE_GET_ID="shellDeviceGetId",e.SHELL_SCANNER_RESPONSE="shellScannerResponse",e.SHELL_SCANNER_START="shellScannerStart",e.SHELL_SCANNER_STOP="shellScannerStop",e.SHELL_SCANNER_ERROR="shellScannerError",e.SHELL_DEVICE_GET_ID_RESPONSE="shellDeviceGetIdResponse",e}(L||{}),Ct=function(e){return e.SHELL_LOADING_REMOTE_OK="shellLoadingRemoteOk",e}(Ct||{});var f=function(e){return e.TOKEN="token",e.APP_UUID="appUuid",e.APP_SYNC_MARK="appSyncMark",e.LANGUAGE="language",e}(f||{}),A=function(e){return e.EN="en",e.ES="es",e}(A||{}),N=function(e){return e.SYSTEM="[SYSTEM]",e}(N||{}),I=function(e){return e.UUID_EMAIL_DOMAIN="@uuid.app",e.UUID_QR_CODE="app-uuid-code:",e.GAME_CODES="GameCodes",e}(I||{}),b=function(e){return e.LOTERIA_NACIONAL="ln",e}(b||{}),y=function(e){return e.CANCEL="CANCEL",e.ACCEPT="ACCEPT",e}(y||{});import{TranslateModule as Ee}from"@ngx-translate/core";import{CommonModule as he}from"@angular/common";import{EventEmitter as fe}from"@angular/core";var C={api:{host:"https://api.lookttery.com/api"},web:{host:"https://lookttery.com"}};import"@angular/core";import{BehaviorSubject as de}from"rxjs";import*as W from"@angular/core";import*as Mt from"@ngx-translate/core";var J=(()=>{class e{constructor(t){this.translateService=t}transform(t){let n=new Date(t),i={weekday:"long",year:"numeric",month:"long",day:"numeric"},m=n.toLocaleDateString(this.translateService.currentLang,i),h=new de(m);return this.translateService.onLangChange.subscribe(()=>(m=n.toLocaleDateString(this.translateService.currentLang,i),h.next(m))),h}static{this.\u0275fac=function(n){return new(n||e)(W.\u0275\u0275directiveInject(Mt.TranslateService,16))}}static{this.\u0275pipe=W.\u0275\u0275definePipe({name:"date",type:e,pure:!0,standalone:!0})}}return e})();import{IonicModule as Ce}from"@ionic/angular";X();import{TranslateModule as ve}from"@ngx-translate/core";import*as r from"@angular/core";import"@angular/core";import{lastValueFrom as Dt}from"rxjs";import*as j from"@angular/core";import*as Lt from"@ionic/angular";import*as At from"@ngx-translate/core";import{HttpHeaders as ue}from"@angular/common/http";import"@angular/core";import{catchError as ge}from"rxjs";import*as R from"@angular/core";import*as Tt from"@angular/common/http";import*as Ot from"@angular/router";import"@angular/core";import*as It from"@angular/core";var k=(()=>{class e{constructor(){}setItem(t,n){localStorage.setItem(t,n)}getItem(t){try{return JSON.parse(localStorage.getItem(t)||"")}catch{return localStorage.getItem(t)}}removeItem(t){localStorage.removeItem(t)}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275prov=It.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var Et=function(e){return e.UNAUTHORIZED="Unauthorized",e}(Et||{}),w=(()=>{class e{constructor(t,n,i){this.http=t,this.router=n,this.storageSrv=i}get(t,n){return n=this.addTokenToHeaders(n),this.http.get(t,n)}post(t,n,i){return i=this.addPostHeaders(i),i=this.addTokenToHeaders(i),this.http.post(t,n,i).pipe(this.handleErrorAndRedirect())}delete(t,n){return n=this.addTokenToHeaders(n),this.http.delete(t,n)}addTokenToHeaders(t){let i=[["Authorization",`Bearer ${this.storageSrv.getItem(f.TOKEN)?.token}`]];return this.addHeaders(i,t)}addPostHeaders(t){let n=[["Content-Type","application/json"]];return this.addHeaders(n,t)}addHeaders(t,n){return t.forEach(i=>{n=n||{},n.headers=n.headers||{},n.headers instanceof ue?n.headers=n.headers.append(i[0],i[1]):typeof n.headers=="object"&&(n.headers[i[0]]=i[1])}),n||{}}handleErrorAndRedirect(){return ge((t,n)=>u(this,null,function*(){throw t.status===401&&t.statusText===Et.UNAUTHORIZED&&(this.storageSrv.removeItem(f.TOKEN),this.router.navigate(["/","main"])),t}))}static{this.\u0275fac=function(n){return new(n||e)(R.\u0275\u0275inject(Tt.HttpClient),R.\u0275\u0275inject(Ot.Router),R.\u0275\u0275inject(k))}}static{this.\u0275prov=R.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var V=(()=>{class e{constructor(t,n,i){this.alertController=t,this.translateSrv=n,this.apiSrv=i,this.apiTicket=`${C.api.host}/ticket`}createNewTicket(t){return u(this,null,function*(){let n={data:{info:{code:t}}};try{let i=yield this.apiSrv.post(this.apiTicket,n);return yield Dt(i)}catch(i){throw i}})}deleteTicketById(t){return u(this,null,function*(){try{let n=yield this.apiSrv.delete(`${this.apiTicket}/${t}`);return yield Dt(n)}catch(n){throw n}})}presentAlertConfirmDeleteTicket(){return u(this,null,function*(){let t=yield this.alertController.create({header:this.translateSrv.instant("TICKETS.DELETE_TICKET"),subHeader:this.translateSrv.instant("GLOBAL.IRREVERSIBLE_ACTION"),message:this.translateSrv.instant("TICKETS.DELETE_TICKET_QUESTION"),buttons:[{text:this.translateSrv.instant("GLOBAL.CANCEL"),role:y.CANCEL,handler:()=>{}},{text:this.translateSrv.instant("GLOBAL.ACCEPT"),role:y.ACCEPT,handler:()=>{}}]});yield t.present();let{role:n}=yield t.onDidDismiss();return n})}static{this.\u0275fac=function(n){return new(n||e)(j.\u0275\u0275inject(Lt.AlertController),j.\u0275\u0275inject(At.TranslateService),j.\u0275\u0275inject(w))}}static{this.\u0275prov=j.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();import*as Gt from"@angular/common";import*as et from"@ionic/angular";import*as Nt from"@ngx-translate/core";function _e(e,g){e&1&&(r.\u0275\u0275elementStart(0,"section",1),r.\u0275\u0275element(1,"ion-skeleton-text",2),r.\u0275\u0275elementStart(2,"section",3),r.\u0275\u0275element(3,"ion-skeleton-text",4)(4,"ion-skeleton-text",5)(5,"ion-skeleton-text",6),r.\u0275\u0275elementEnd()()),e&2&&(r.\u0275\u0275advance(1),r.\u0275\u0275property("animated",!0),r.\u0275\u0275advance(2),r.\u0275\u0275property("animated",!0),r.\u0275\u0275advance(1),r.\u0275\u0275property("animated",!0),r.\u0275\u0275advance(1),r.\u0275\u0275property("animated",!0))}function ye(e,g){if(e&1&&(r.\u0275\u0275elementStart(0,"span",12),r.\u0275\u0275text(1),r.\u0275\u0275pipe(2,"async"),r.\u0275\u0275pipe(3,"currency"),r.\u0275\u0275elementEnd()),e&2){let t=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(r.\u0275\u0275pipeBind1(2,1,r.\u0275\u0275pipeBind2(3,3,t.data.prize.quantity/100,"EUR")))}}function Se(e,g){e&1&&(r.\u0275\u0275elementStart(0,"span",12),r.\u0275\u0275text(1),r.\u0275\u0275pipe(2,"translate"),r.\u0275\u0275elementEnd()),e&2&&(r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(r.\u0275\u0275pipeBind1(2,1,"GAMES.DRAW_PENDING")))}function xe(e,g){if(e&1){let t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"section",13)(1,"ion-icon",14),r.\u0275\u0275listener("click",function(i){r.\u0275\u0275restoreView(t);let m=r.\u0275\u0275nextContext(2);return m.deleteTicketById(m.data.ticket._id||""),r.\u0275\u0275resetView(i.stopPropagation())}),r.\u0275\u0275elementEnd()()}}function be(e,g){if(e&1&&(r.\u0275\u0275elementStart(0,"section",1),r.\u0275\u0275element(1,"img",7),r.\u0275\u0275elementStart(2,"section",3)(3,"span",8),r.\u0275\u0275text(4),r.\u0275\u0275pipe(5,"async"),r.\u0275\u0275pipe(6,"date"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(7,"span",9),r.\u0275\u0275text(8),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(9,ye,4,6,"span",10)(10,Se,3,3),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(11,xe,2,0,"section",11),r.\u0275\u0275elementEnd()),e&2){let t=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275property("src",t.environment.web.host+"/assets/logos/games/"+t.data.ticket.code+".png",r.\u0275\u0275sanitizeUrl),r.\u0275\u0275advance(3),r.\u0275\u0275textInterpolate(r.\u0275\u0275pipeBind1(5,5,r.\u0275\u0275pipeBind1(6,7,t.data.ticket.date))),r.\u0275\u0275advance(4),r.\u0275\u0275textInterpolate(t.data.ticket.data.info.number),r.\u0275\u0275advance(1),r.\u0275\u0275conditional(9,t.data.game.data.info.prizes.length?9:10),r.\u0275\u0275advance(2),r.\u0275\u0275conditional(11,t.showActions?11:-1)}}function ke(e,g){e&1&&(r.\u0275\u0275elementStart(0,"p"),r.\u0275\u0275text(1,"Game not available"),r.\u0275\u0275elementEnd())}var nt=(()=>{class e{constructor(t){this.ticketSrv=t,this.skeleton=!1,this.showActions=!0,this.deleteTicketEvent=new fe,this.environment=C,this.gameCodes=b}ngOnInit(){}deleteTicketById(t){return u(this,null,function*(){if((yield this.ticketSrv.presentAlertConfirmDeleteTicket())===y.ACCEPT){this.skeleton=!0;let i=yield this.ticketSrv.deleteTicketById(t);i&&this.deleteTicketEvent.emit(i)}})}static{this.\u0275fac=function(n){return new(n||e)(r.\u0275\u0275directiveInject(V))}}static{this.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["app-ticket-ln"]],inputs:{data:"data",skeleton:"skeleton",showActions:"showActions"},outputs:{deleteTicketEvent:"deleteTicketEvent"},standalone:!0,features:[r.\u0275\u0275StandaloneFeature],decls:3,vars:1,consts:[["class","ticket"],[1,"ticket"],[1,"ticket-img",3,"animated"],[1,"ticket-data"],[1,"ticket-data-date",3,"animated"],[1,"ticket-data-number",3,"animated"],[1,"ticket-data-prize",3,"animated"],["aria-hidden","true","slot","start","alt","",1,"ticket-img",3,"src"],["color","medium",1,"ticket-data-date"],[1,"ticket-data-number"],["class","ticket-data-prize"],["class","ticket-actions"],[1,"ticket-data-prize"],[1,"ticket-actions"],["name","close-outline",1,"ticket-actions-delete",3,"click"]],template:function(n,i){n&1&&r.\u0275\u0275template(0,_e,6,4,"section",0)(1,be,12,9)(2,ke,2,0),n&2&&r.\u0275\u0275conditional(0,i.skeleton?0:i.data.ticket.code===i.gameCodes.LOTERIA_NACIONAL?1:2)},dependencies:[he,Gt.AsyncPipe,J,q,Ce,et.IonIcon,et.IonSkeletonText,ve,Nt.TranslatePipe],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]   .ticket[_ngcontent-%COMP%]{background-color:#fff;display:flex;flex-direction:row;align-items:flex-start;justify-content:flex-start;margin:15px;border-radius:7px;box-shadow:#63636333 0 2px 8px;padding:15px;min-width:350px}[_nghost-%COMP%]   .ticket-img[_ngcontent-%COMP%]{width:50px;margin:0 15px 0 0}[_nghost-%COMP%]   .ticket-data[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%}[_nghost-%COMP%]   .ticket-data-date[_ngcontent-%COMP%]{margin-bottom:15px}[_nghost-%COMP%]   .ticket-data-number[_ngcontent-%COMP%]{font-size:40px;font-weight:700;letter-spacing:17px;margin-bottom:12px}[_nghost-%COMP%]   .ticket-actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-end;margin:0 0 0 15px}[_nghost-%COMP%]   .ticket-actions-delete[_ngcontent-%COMP%]{width:30px;height:30px}"],changeDetection:0})}}return e})();import*as s from"@angular/core";import"@angular/core";import{lastValueFrom as Rt}from"rxjs";import{v4 as Pe}from"uuid";import*as U from"@angular/core";import"@angular/core";import{lastValueFrom as vt}from"rxjs";import*as Y from"@angular/core";var Me=1e3*60*60*1.5,T=(()=>{class e{constructor(t,n){this.apiSrv=t,this.storageSrv=n,this.apiUser=`${C.api.host}/user`}createUserByUuid(t){return u(this,null,function*(){let n={email:`${t}${I.UUID_EMAIL_DOMAIN}`,password:t,name:t};try{let i=this.apiSrv.post(this.apiUser,n);return yield vt(i)}catch(i){throw i}})}loginByUuid(t){return u(this,null,function*(){return yield this.login(`${t}${I.UUID_EMAIL_DOMAIN}`,t)})}login(t,n){return u(this,null,function*(){let i={email:t,password:n};try{let m=this.apiSrv.post(`${this.apiUser}/login`,i),h=yield vt(m);if(h.token){let _={token:h.token,date:Date.now()};this.storageSrv.setItem(f.TOKEN,JSON.stringify(_)),console.info(N.SYSTEM,`${h.token}`)}return h}catch(m){throw m}})}checkTokenExpiration(t){return u(this,null,function*(){let i=this.storageSrv.getItem(f.TOKEN)?.date||0;Date.now()-i>Me&&(yield this.loginByUuid(t))})}getAllTicketsByUser(){return u(this,null,function*(){try{let t=this.apiSrv.get(`${this.apiUser}/ticket/all?limit=100&offset=0`);return yield vt(t)}catch{return[]}})}static{this.\u0275fac=function(n){return new(n||e)(Y.\u0275\u0275inject(w),Y.\u0275\u0275inject(k))}}static{this.\u0275prov=Y.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();import"@angular/core";import*as it from"@angular/core";var Bt=(()=>{class e{constructor(t){this.storageSrv=t}hasShell(){return this.storageSrv.getItem(ft.SHELL_VERSION)==="0.0.0"}static{this.\u0275fac=function(n){return new(n||e)(it.\u0275\u0275inject(k))}}static{this.\u0275prov=it.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var O=(()=>{class e{constructor(t,n,i,m){this.apiSrv=t,this.userSrv=n,this.coreSrv=i,this.storageSrv=m,this.uuid="",this.apiUuid=`${C.api.host}/uuid`,window.addEventListener(L.SHELL_DEVICE_GET_ID_RESPONSE,h=>u(this,null,function*(){let _=localStorage.getItem(f.APP_UUID)||h.detail?.response||"";this.setAppUuid(_),yield this.onDeviceIdResponse()}))}init(){return u(this,null,function*(){yield this.requestDeviceId()})}getUuid(){return this.uuid}updateAppUuid(t){this.setAppUuid(t),this.setSyncMark()}requestDeviceId(){return u(this,null,function*(){if(this.coreSrv.hasShell())window.dispatchEvent(new CustomEvent(L.SHELL_DEVICE_GET_ID));else{let t=localStorage.getItem(f.APP_UUID)||"";this.setAppUuid(t),yield this.onDeviceIdResponse()}})}setAppUuid(t){this.uuid=t,this.uuid||(this.uuid=Pe()),this.storageSrv.setItem(f.APP_UUID,this.uuid)}setSyncMark(){this.storageSrv.setItem(f.APP_SYNC_MARK,new Date().toISOString())}onDeviceIdResponse(){return u(this,null,function*(){(yield this.getUuidData())?(yield this.userSrv.loginByUuid(this.uuid),console.info(N.SYSTEM,`UUID ${this.uuid} was registered.`)):yield this.registerUuid()})}getUuidData(){return u(this,null,function*(){try{let t=this.apiSrv.get(`${this.apiUuid}/${this.uuid}`);return yield Rt(t)}catch{return null}})}registerUuid(){return u(this,null,function*(){let t=yield this.userSrv.createUserByUuid(this.uuid);if((yield this.userSrv.loginByUuid(this.uuid)).token){let i={uuid:this.uuid,user:t._id};try{let m=this.apiSrv.post(this.apiUuid,i),h=yield Rt(m);this.uuid=h.uuid,console.info(N.SYSTEM,`UUID ${this.uuid} has been registered.`)}catch(m){console.error(m)}}})}static{this.\u0275fac=function(n){return new(n||e)(U.\u0275\u0275inject(w),U.\u0275\u0275inject(T),U.\u0275\u0275inject(Bt),U.\u0275\u0275inject(k))}}static{this.\u0275prov=U.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();import"@angular/core";import{lastValueFrom as St}from"rxjs";import*as Q from"@angular/core";import*as jt from"@angular/router";var E=(()=>{class e{constructor(t,n){this.apiSrv=t,this.router=n,this.apiGame=`${C.api.host}/game`}getAllGamesByCodeOnlyWithPrizes(t,n=10,i=0){return u(this,null,function*(){try{let m=this.apiSrv.get(`${this.apiGame}?limit=${n}&offset=${i}&code=${t}&onlyWithPrizes=true`);return yield St(m)}catch{return[]}})}getAllTicketsPrizesByUser(){return u(this,null,function*(){try{let t=this.apiSrv.get(`${this.apiGame}/ticket/all?limit=25&offset=0`);return yield St(t)}catch{return[]}})}getTicketPrizeByTicketId(t){return u(this,null,function*(){try{let n=this.apiSrv.get(`${this.apiGame}/ticket/${t}`);return yield St(n)}catch{return null}})}openGame(t){t.data.info.prizes.length&&this.router.navigate(["/main/","game-detail-"+t.code],{state:{game:t}})}static{this.\u0275fac=function(n){return new(n||e)(Q.\u0275\u0275inject(w),Q.\u0275\u0275inject(jt.Router))}}static{this.\u0275prov=Q.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();import*as z from"@ionic/angular";import*as ot from"@ngx-translate/core";import*as Vt from"@angular/common";function De(e,g){e&1&&(s.\u0275\u0275elementStart(0,"article"),s.\u0275\u0275text(1,"Camera permission denied."),s.\u0275\u0275elementEnd())}function Le(e,g){e&1&&s.\u0275\u0275element(0,"ion-icon",5)}function Ae(e,g){if(e&1&&s.\u0275\u0275template(0,Le,1,0,"ion-icon",4),e&2){let t=s.\u0275\u0275nextContext();s.\u0275\u0275conditional(0,t.showTicket?-1:0)}}function Ue(e,g){if(e&1&&s.\u0275\u0275element(0,"app-ticket-ln",7),e&2){let t=s.\u0275\u0275nextContext(2);s.\u0275\u0275property("showActions",!1)("data",t.ticketData)}}function Ge(e,g){if(e&1){let t=s.\u0275\u0275getCurrentView();s.\u0275\u0275elementStart(0,"section",6),s.\u0275\u0275listener("click",function(){s.\u0275\u0275restoreView(t);let i=s.\u0275\u0275nextContext();return s.\u0275\u0275resetView(i.tapTicket(!1))}),s.\u0275\u0275template(1,Ue,1,2,"app-ticket-ln",7),s.\u0275\u0275elementStart(2,"article",8)(3,"span"),s.\u0275\u0275text(4),s.\u0275\u0275pipe(5,"translate"),s.\u0275\u0275elementEnd()()()}if(e&2){let t=s.\u0275\u0275nextContext();s.\u0275\u0275advance(1),s.\u0275\u0275conditional(1,(t.ticketData==null||t.ticketData.game==null?null:t.ticketData.game.code)===t.gameCodes.LOTERIA_NACIONAL?1:-1),s.\u0275\u0275advance(3),s.\u0275\u0275textInterpolate(s.\u0275\u0275pipeBind1(5,2,"SCAN.MESSAGES.TAP_SCREEN_TO_SCAN"))}}var Ne=e=>({visibility:e}),zt=(()=>{class e{handleShellScannerResponse(t){return u(this,null,function*(){yield this.onScannerResponse(t.detail?.response||{})})}handleShellScannerError(t){return u(this,null,function*(){yield this.onScannerError(t.detail?.response||{})})}constructor(t,n,i,m,h,_,M,K){this.cdr=t,this.ticketSrv=n,this.uuidSrv=i,this.userSrv=m,this.gameSrv=h,this.loadingCtrl=_,this.translateSrv=M,this.alertController=K,this.gameCodes=b,this.hasShell=!1,this.responses=[],this.hasPermission=!0,this.ticketData=null,this.showTicket=!1,this.backgroundColor=""}ngOnInit(){}ngAfterViewInit(){}ionViewDidEnter(){return u(this,null,function*(){this.setTicketVisibility(!1),document.body.style.backgroundColor="transparent",yield this.startScan()})}ionViewWillLeave(){this.setTicketVisibility(!1),document.body.style.backgroundColor=this.backgroundColor,this.stopScan()}startScan(t){return u(this,null,function*(){this.hasPermission=!0,window.dispatchEvent(new CustomEvent(L.SHELL_SCANNER_START))})}stopScan(t){window.dispatchEvent(new CustomEvent(L.SHELL_SCANNER_STOP))}permissionResponse(t){this.hasPermission=t||!1}setTicketVisibility(t){this.showTicket=t,this.showTicket?document.querySelector("ion-tabs").style.padding="0":document.querySelector("ion-tabs").style.padding="",this.cdr.detectChanges()}tapTicket(t){return u(this,null,function*(){this.setTicketVisibility(!1),yield this.startScan()})}onScannerResponse(t){return u(this,null,function*(){if(this.checkUuidQRCode(t.content||"")){let n=t.content.toString().replace(I.UUID_QR_CODE,"");yield this.syncUuid(n),this.setTicketVisibility(!1),yield this.startScan()}else if(t&&!t.closed){this.showLoading();let n="";try{n=(yield this.ticketSrv.createNewTicket(t.content||""))._id||""}catch(i){n=i.error?.ticket?._id||""}this.ticketData=yield this.gameSrv.getTicketPrizeByTicketId(n),this.dismissLoading(),this.setTicketVisibility(!0)}})}onScannerError(t){return u(this,null,function*(){this.hasPermission=!1})}checkUuidQRCode(t){return!!t.toString().includes(I.UUID_QR_CODE)}showLoading(){return u(this,null,function*(){(yield this.loadingCtrl.create({message:yield this.translateSrv.instant("SCAN.MESSAGES.CHECKING_TICKETS"),duration:5e3})).present()})}dismissLoading(){return u(this,null,function*(){yield this.loadingCtrl.dismiss()})}presentAlertConfirmSyncUuid(){return u(this,null,function*(){let t=yield this.alertController.create({header:this.translateSrv.instant("UUID.SYNC_DEVICE"),subHeader:this.translateSrv.instant("GLOBAL.CONFIG_ACTION"),message:this.translateSrv.instant("UUID.SYNC_DEVICE_QUESTION"),buttons:[{text:this.translateSrv.instant("GLOBAL.CANCEL"),role:y.CANCEL,handler:()=>{}},{text:this.translateSrv.instant("GLOBAL.ACCEPT"),role:y.ACCEPT,handler:()=>{}}]});yield t.present();let{role:n}=yield t.onDidDismiss();return n})}syncUuid(t){return u(this,null,function*(){(yield this.presentAlertConfirmSyncUuid())===y.ACCEPT&&(this.uuidSrv.updateAppUuid(t),yield this.userSrv.loginByUuid(t))})}static{this.\u0275fac=function(n){return new(n||e)(s.\u0275\u0275directiveInject(s.ChangeDetectorRef),s.\u0275\u0275directiveInject(V),s.\u0275\u0275directiveInject(O),s.\u0275\u0275directiveInject(T),s.\u0275\u0275directiveInject(E),s.\u0275\u0275directiveInject(z.LoadingController),s.\u0275\u0275directiveInject(ot.TranslateService),s.\u0275\u0275directiveInject(z.AlertController))}}static{this.\u0275cmp=s.\u0275\u0275defineComponent({type:e,selectors:[["app-scan"]],hostBindings:function(n,i){n&1&&s.\u0275\u0275listener("shellScannerResponse",function(h){return i.handleShellScannerResponse(h)},!1,s.\u0275\u0275resolveWindow)("shellScannerError",function(h){return i.handleShellScannerError(h)},!1,s.\u0275\u0275resolveWindow)},standalone:!0,features:[s.\u0275\u0275StandaloneFeature],decls:26,vars:5,consts:[[1,"animated-background",3,"ngStyle"],[1,"scan"],[1,"scan-screen"],["class","ticket-background"],["class","scan-screen-pointer","name","add-outline"],["name","add-outline",1,"scan-screen-pointer"],[1,"ticket-background",3,"click"],[3,"showActions","data"],[1,"ticket-instructions"]],template:function(n,i){n&1&&(s.\u0275\u0275elementStart(0,"div",0),s.\u0275\u0275element(1,"span")(2,"span")(3,"span")(4,"span")(5,"span")(6,"span")(7,"span")(8,"span")(9,"span")(10,"span")(11,"span")(12,"span")(13,"span")(14,"span")(15,"span")(16,"span")(17,"span")(18,"span")(19,"span")(20,"span"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(21,"section",1)(22,"section",2),s.\u0275\u0275template(23,De,2,0,"article")(24,Ae,1,1),s.\u0275\u0275elementEnd()(),s.\u0275\u0275template(25,Ge,6,4,"section",3)),n&2&&(s.\u0275\u0275property("ngStyle",s.\u0275\u0275pureFunction1(3,Ne,i.showTicket?"visible":"hidden")),s.\u0275\u0275advance(23),s.\u0275\u0275conditional(23,i.hasPermission?24:23),s.\u0275\u0275advance(2),s.\u0275\u0275conditional(25,i.showTicket?25:-1))},dependencies:[Ie,Vt.NgStyle,Te,Oe,z.IonIcon,Ee,ot.TranslatePipe,nt],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]   .scan[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:flex-start;height:calc(100vh - env(safe-area-inset-bottom,0));margin:0}[_nghost-%COMP%]   .scan-screen[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;height:calc(100% - env(safe-area-inset-bottom,0))}[_nghost-%COMP%]   .scan-screen-pointer[_ngcontent-%COMP%]{width:40px;color:#fff;height:40px}[_nghost-%COMP%]   .ticket-background[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start;align-items:center;position:absolute;width:100%;height:100vh;top:0;padding-top:80px}[_nghost-%COMP%]   .ticket-instructions[_ngcontent-%COMP%]{margin-top:40px;font-weight:700;color:#fff}ion-modal[_ngcontent-%COMP%]{--height: 200px;--border-radius: 8px;--box-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--background: transparent}ion-modal[_ngcontent-%COMP%]   ion-content[_ngcontent-%COMP%]{--background: transparent}ion-modal[_ngcontent-%COMP%]   .ticket-ln[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}ion-modal[_ngcontent-%COMP%]   .ticket-ln-number[_ngcontent-%COMP%]{font-size:40px;font-weight:700;letter-spacing:17px;margin:20px 20px 20px 37px}ion-modal[_ngcontent-%COMP%]   .ticket-ln-prize[_ngcontent-%COMP%]{font-size:20px;font-weight:700}ion-modal[_ngcontent-%COMP%]::part(content){background-color:transparent;border:none;box-shadow:none}ion-modal[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{padding:0}@keyframes _ngcontent-%COMP%_move{to{transform:translateZ(1px) rotate(360deg)}}.animated-background[_ngcontent-%COMP%]{position:fixed;width:100vw;height:100vh;top:0;left:0;background:#3E1E68;overflow:hidden}.animated-background[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:20vmin;height:20vmin;border-radius:20vmin;backface-visibility:hidden;position:absolute;animation:_ngcontent-%COMP%_move;animation-duration:45;animation-timing-function:linear;animation-iteration-count:infinite}.animated-background[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(0){color:#583c87;top:1%;left:25%;animation-duration:49s;animation-delay:-14s;transform-origin:-21vw -17vh;box-shadow:-40vmin 0 5.6508571128vmin currentColor}.animated-background[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(1){color:#583c87;top:92%;left:7%;animation-duration:51s;animation-delay:-32s;transform-origin:22vw -3vh;box-shadow:-40vmin 0 5.8332436514vmin currentColor}.animated-background[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){color:#e45a84;top:76%;left:65%;animation-duration:8s;animation-delay:-14s;transform-origin:-14vw -19vh;box-shadow:-40vmin 0 5.1087852604vmin currentColor}.animated-background[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){color:#583c87;top:20%;left:55%;animation-duration:9s;animation-delay:-39s;transform-origin:12vw 5vh;box-shadow:40vmin 0 5.3298054904vmin currentColor}.animated-background[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(4){color:#e45a84;top:26%;left:79%;animation-duration:54s;animation-delay:-14s;transform-origin:-6vw -2vh;box-shadow:-40vmin 0 5.3879032859vmin currentColor}.animated-background[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(5){color:#583c87;top:47%;left:93%;animation-duration:7s;animation-delay:-17s;transform-origin:13vw -5vh;box-shadow:-40vmin 0 5.2369732429vmin currentColor}.animated-background[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(6){color:#583c87;top:97%;left:46%;animation-duration:20s;animation-delay:-3s;transform-origin:6vw -16vh;box-shadow:40vmin 0 5.8166757212vmin currentColor}.animated-background[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(7){color:#583c87;top:54%;left:52%;animation-duration:6s;animation-delay:-47s;transform-origin:23vw 16vh;box-shadow:-40vmin 0 5.4546477701vmin currentColor}.animated-background[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(8){color:#e45a84;top:64%;left:61%;animation-duration:23s;animation-delay:-7s;transform-origin:17vw 3vh;box-shadow:-40vmin 0 5.6193809352vmin currentColor}.animated-background[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(9){color:#ffacac;top:96%;left:17%;animation-duration:33s;animation-delay:-44s;transform-origin:20vw 11vh;box-shadow:40vmin 0 5.881491465vmin currentColor}.animated-background[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(10){color:#e45a84;top:8%;left:18%;animation-duration:20s;animation-delay:-29s;transform-origin:18vw 2vh;box-shadow:-40vmin 0 5.9279891447vmin currentColor}.animated-background[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(11){color:#583c87;top:48%;left:95%;animation-duration:51s;animation-delay:-34s;transform-origin:-21vw 24vh;box-shadow:40vmin 0 5.564150385vmin currentColor}.animated-background[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(12){color:#e45a84;top:86%;left:74%;animation-duration:54s;animation-delay:-2s;transform-origin:-1vw 6vh;box-shadow:40vmin 0 5.3909289617vmin currentColor}.animated-background[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(13){color:#583c87;top:6%;left:46%;animation-duration:19s;animation-delay:-31s;transform-origin:13vw 15vh;box-shadow:-40vmin 0 5.5802349616vmin currentColor}.animated-background[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(14){color:#e45a84;top:45%;left:32%;animation-duration:17s;animation-delay:-41s;transform-origin:7vw 13vh;box-shadow:40vmin 0 5.2147795462vmin currentColor}.animated-background[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(15){color:#e45a84;top:6%;left:76%;animation-duration:13s;animation-delay:-34s;transform-origin:-6vw -15vh;box-shadow:-40vmin 0 5.684363269vmin currentColor}.animated-background[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(16){color:#ffacac;top:99%;left:41%;animation-duration:28s;animation-delay:-41s;transform-origin:-15vw -9vh;box-shadow:40vmin 0 5.6490626298vmin currentColor}.animated-background[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(17){color:#583c87;top:53%;left:87%;animation-duration:38s;animation-delay:-1s;transform-origin:-9vw 5vh;box-shadow:-40vmin 0 5.7487953568vmin currentColor}.animated-background[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(18){color:#583c87;top:93%;left:87%;animation-duration:29s;animation-delay:-46s;transform-origin:-8vw 23vh;box-shadow:-40vmin 0 5.2337571763vmin currentColor}.animated-background[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(19){color:#ffacac;top:1%;left:67%;animation-duration:38s;animation-delay:-44s;transform-origin:-15vw -14vh;box-shadow:-40vmin 0 5.7801397915vmin currentColor}"],changeDetection:0})}}return e})();import{CommonModule as Be}from"@angular/common";import"@angular/core";import{RouterModule as Re}from"@angular/router";import{IonicModule as je}from"@ionic/angular";import{TranslateModule as Ve}from"@ngx-translate/core";import*as p from"@angular/core";import*as Ft from"@angular/router";import*as D from"@ionic/angular";import*as Ht from"@ngx-translate/core";var ze=["mainTabs"],$t=(()=>{class e{constructor(t){this.router=t}ngOnInit(){}ngAfterViewInit(){setTimeout(()=>{this.mainTabs.select("games")},500)}static{this.\u0275fac=function(n){return new(n||e)(p.\u0275\u0275directiveInject(Ft.Router))}}static{this.\u0275cmp=p.\u0275\u0275defineComponent({type:e,selectors:[["app-main"]],viewQuery:function(n,i){if(n&1&&p.\u0275\u0275viewQuery(ze,5),n&2){let m;p.\u0275\u0275queryRefresh(m=p.\u0275\u0275loadQuery())&&(i.mainTabs=m.first)}},standalone:!0,features:[p.\u0275\u0275StandaloneFeature],decls:23,vars:12,consts:[["mainTabs",""],["slot","bottom"],["tab","games"],["name","grid-outline"],["tab","scan"],["name","scan-outline"],["tab","tickets"],["name","wallet-outline"],["tab","menu"],["name","cog-outline"]],template:function(n,i){n&1&&(p.\u0275\u0275elementStart(0,"ion-tabs",null,0)(2,"ion-tab-bar",1)(3,"ion-tab-button",2),p.\u0275\u0275element(4,"ion-icon",3),p.\u0275\u0275elementStart(5,"span"),p.\u0275\u0275text(6),p.\u0275\u0275pipe(7,"translate"),p.\u0275\u0275elementEnd()(),p.\u0275\u0275elementStart(8,"ion-tab-button",4),p.\u0275\u0275element(9,"ion-icon",5),p.\u0275\u0275elementStart(10,"span"),p.\u0275\u0275text(11),p.\u0275\u0275pipe(12,"translate"),p.\u0275\u0275elementEnd()(),p.\u0275\u0275elementStart(13,"ion-tab-button",6),p.\u0275\u0275element(14,"ion-icon",7),p.\u0275\u0275elementStart(15,"span"),p.\u0275\u0275text(16),p.\u0275\u0275pipe(17,"translate"),p.\u0275\u0275elementEnd()(),p.\u0275\u0275elementStart(18,"ion-tab-button",8),p.\u0275\u0275element(19,"ion-icon",9),p.\u0275\u0275elementStart(20,"span"),p.\u0275\u0275text(21),p.\u0275\u0275pipe(22,"translate"),p.\u0275\u0275elementEnd()()()()),n&2&&(p.\u0275\u0275advance(6),p.\u0275\u0275textInterpolate(p.\u0275\u0275pipeBind1(7,4,"MAIN.TABS.GAMES")),p.\u0275\u0275advance(5),p.\u0275\u0275textInterpolate(p.\u0275\u0275pipeBind1(12,6,"MAIN.TABS.SCAN_NOW")),p.\u0275\u0275advance(5),p.\u0275\u0275textInterpolate(p.\u0275\u0275pipeBind1(17,8,"MAIN.TABS.TICKETS")),p.\u0275\u0275advance(5),p.\u0275\u0275textInterpolate(p.\u0275\u0275pipeBind1(22,10,"MAIN.TABS.SETTINGS")))},dependencies:[Be,Re,je,D.IonIcon,D.IonTabBar,D.IonTabButton,D.IonTabs,Ve,Ht.TranslatePipe],styles:["[_nghost-%COMP%]{display:block}ion-tabs[_ngcontent-%COMP%]{padding:env(safe-area-inset-top,0) env(safe-area-inset-right,0) 0 env(safe-area-inset-left,0)}ion-tabs[_ngcontent-%COMP%]   ion-tab-bar[_ngcontent-%COMP%]{padding-bottom:env(safe-area-inset-bottom,0)}"],changeDetection:0})}}return e})();import{CommonModule as He}from"@angular/common";import{HttpClient as $e,HttpClientModule as Ke}from"@angular/common/http";import"@angular/core";import{NavigationEnd as qe,RouterModule as Ye}from"@angular/router";import{filter as Qe}from"rxjs";import{IonicModule as We}from"@ionic/angular";import{TranslateLoader as Je,TranslateModule as Ze}from"@ngx-translate/core";import"@angular/core";import{catchError as Fe}from"rxjs/operators";import*as rt from"@angular/core";import*as Kt from"@angular/common/http";var qt=(()=>{class e{constructor(t){this.httpClient=t}getTranslation(t){let n=C.web.host+`/assets/i18n/${t}.json`;return this.httpClient.get(n).pipe(Fe(i=>(console.log("Error loading translation file",i),this.httpClient.get(C.web.host+"/assets/i18n/es.json"))))}static{this.\u0275fac=function(n){return new(n||e)(rt.\u0275\u0275inject(Kt.HttpClient))}}static{this.\u0275prov=rt.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac})}}return e})();import*as S from"@angular/core";import*as Yt from"@ngx-translate/core";import*as at from"@angular/router";var Qt=(()=>{class e{constructor(t,n,i,m,h){this.translateSrv=t,this.uuidSrv=n,this.userSrv=i,this.storageSrv=m,this.router=h,this.translateSrv.setDefaultLang("en"),this.translateSrv.use("en")}ngOnInit(){this.setNoErrorLoadingRemote(),this.importStyles(),this.importScripts(),this.uuidSrv.init(),this.router.events.pipe(Qe(t=>t instanceof qe)).subscribe(t=>{let n=this.uuidSrv.getUuid();n?this.userSrv.checkTokenExpiration(n):this.uuidSrv.init()}),this.loadLanguage()}loadLanguage(){let t=this.storageSrv.getItem(f.LANGUAGE)||A.EN;this.translateSrv.use(t)}setNoErrorLoadingRemote(){this.storageSrv.setItem(Ct.SHELL_LOADING_REMOTE_OK,"true")}importScripts(){let t=["https://cdn.jsdelivr.net/npm/@ionic/core/dist/ionic/ionic.esm.js","https://cdn.jsdelivr.net/npm/ionicons/dist/ionicons/ionicons.esm.js"],n=document.head;t.forEach(i=>{let m=document.createElement("script");m.type="module",m.src=i,m.async=!1,document.head.appendChild(m),n.insertBefore(m,n.firstElementChild)})}importStyles(){let t=["https://cdn.jsdelivr.net/npm/@ionic/core/css/ionic.bundle.css"],n=document.head;t.forEach(i=>{let m=document.createElement("link");m.rel="stylesheet",m.href=i,n.insertBefore(m,n.firstElementChild)})}static{this.\u0275fac=function(n){return new(n||e)(S.\u0275\u0275directiveInject(Yt.TranslateService),S.\u0275\u0275directiveInject(O),S.\u0275\u0275directiveInject(T),S.\u0275\u0275directiveInject(k),S.\u0275\u0275directiveInject(at.Router))}}static{this.\u0275cmp=S.\u0275\u0275defineComponent({type:e,selectors:[["app-remote-app"]],standalone:!0,features:[S.\u0275\u0275ProvidersFeature([w,O,T,V,E,Ze.forRoot({loader:{provide:Je,useClass:qt,deps:[$e]}}).providers]),S.\u0275\u0275StandaloneFeature],decls:1,vars:0,template:function(n,i){n&1&&S.\u0275\u0275element(0,"router-outlet")},dependencies:[He,Ye,at.RouterOutlet,We,Ke],styles:[`:root{--color-background: var(--ion-tab-bar-background, var(--ion-color-step-50, #f7f7f7));--box-shadow: rgba(99, 99, 99, .2) 0px 2px 8px 0px;--ion-color-primary: #3880ff;--ion-color-primary-rgb: 56,128,255;--ion-color-primary-contrast: #ffffff;--ion-color-primary-contrast-rgb: 255,255,255;--ion-color-primary-shade: #3171e0;--ion-color-primary-tint: #4c8dff;--ion-color-secondary: #3dc2ff;--ion-color-secondary-rgb: 61,194,255;--ion-color-secondary-contrast: #000000;--ion-color-secondary-contrast-rgb: 0,0,0;--ion-color-secondary-shade: #36abe0;--ion-color-secondary-tint: #50c8ff;--ion-color-tertiary: #5260ff;--ion-color-tertiary-rgb: 82,96,255;--ion-color-tertiary-contrast: #ffffff;--ion-color-tertiary-contrast-rgb: 255,255,255;--ion-color-tertiary-shade: #4854e0;--ion-color-tertiary-tint: #6370ff;--ion-color-success: #2dd36f;--ion-color-success-rgb: 45,211,111;--ion-color-success-contrast: #000000;--ion-color-success-contrast-rgb: 0,0,0;--ion-color-success-shade: #28ba62;--ion-color-success-tint: #42d77d;--ion-color-warning: #ffc409;--ion-color-warning-rgb: 255,196,9;--ion-color-warning-contrast: #000000;--ion-color-warning-contrast-rgb: 0,0,0;--ion-color-warning-shade: #e0ac08;--ion-color-warning-tint: #ffca22;--ion-color-danger: #eb445a;--ion-color-danger-rgb: 235,68,90;--ion-color-danger-contrast: #000000;--ion-color-danger-contrast-rgb: 0,0,0;--ion-color-danger-shade: #cf3c4f;--ion-color-danger-tint: #ed576b;--ion-color-light: #f4f5f8;--ion-color-light-rgb: 244,245,248;--ion-color-light-contrast: #000000;--ion-color-light-contrast-rgb: 0,0,0;--ion-color-light-shade: #d7d8da;--ion-color-light-tint: #f5f6f9;--ion-color-medium: #92949c;--ion-color-medium-rgb: 146,148,156;--ion-color-medium-contrast: #000000;--ion-color-medium-contrast-rgb: 0,0,0;--ion-color-medium-shade: #808289;--ion-color-medium-tint: #9d9fa6;--ion-color-dark: #222428;--ion-color-dark-rgb: 34,36,40;--ion-color-dark-contrast: #ffffff;--ion-color-dark-contrast-rgb: 255,255,255;--ion-color-dark-shade: #1e2023;--ion-color-dark-tint: #383a3e}:host{display:block}body{background:var(--color-background)}
`],encapsulation:2,changeDetection:0})}}return e})();import{CommonModule as on}from"@angular/common";import"@angular/core";import{RouterModule as rn}from"@angular/router";import{IonicModule as an}from"@ionic/angular";import{CommonModule as Qo}from"@angular/common";import"@angular/core";import{IonicModule as er}from"@ionic/angular";import*as G from"@angular/core";import*as Xe from"@angular/router";import*as tn from"@ngx-translate/core";import*as bt from"@ionic/angular";import{TranslateModule as sn}from"@ngx-translate/core";import{CommonModule as en}from"@angular/common";import"@angular/core";import{IonicModule as nn}from"@ionic/angular";import*as P from"@angular/core";import*as Wt from"@ionic/angular";var st=(()=>{class e{static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=P.\u0275\u0275defineComponent({type:e,selectors:[["app-loading"]],standalone:!0,features:[P.\u0275\u0275StandaloneFeature],decls:2,vars:0,consts:[[1,"loading-content"],["name","circular"]],template:function(n,i){n&1&&(P.\u0275\u0275elementStart(0,"section",0),P.\u0275\u0275element(1,"ion-spinner",1),P.\u0275\u0275elementEnd())},dependencies:[en,nn,Wt.IonSpinner],styles:["[_nghost-%COMP%]{display:block}.loading-content[_ngcontent-%COMP%]{position:fixed;top:0;z-index:9;width:100vw;height:100vh;display:flex;align-items:center;justify-content:center;background-color:#00000040}"],changeDetection:0})}}return e})();import*as d from"@angular/core";import*as F from"@ionic/angular";import*as Jt from"@ngx-translate/core";var cn=(e,g)=>g.ticket._id;function ln(e,g){if(e&1){let t=d.\u0275\u0275getCurrentView();d.\u0275\u0275elementStart(0,"app-ticket-ln",3),d.\u0275\u0275listener("click",function(){let m=d.\u0275\u0275restoreView(t).$implicit,h=d.\u0275\u0275nextContext(2);return d.\u0275\u0275resetView(h.openGame(m.game))})("deleteTicketEvent",function(i){d.\u0275\u0275restoreView(t);let m=d.\u0275\u0275nextContext(2);return d.\u0275\u0275resetView(m.deleteTicketById(i))}),d.\u0275\u0275elementEnd()}if(e&2){let t=g.$implicit;d.\u0275\u0275property("data",t)}}function mn(e,g){if(e&1&&(d.\u0275\u0275elementStart(0,"ion-list",2),d.\u0275\u0275repeaterCreate(1,ln,1,1,"app-ticket-ln",4,cn),d.\u0275\u0275elementEnd()),e&2){let t=d.\u0275\u0275nextContext();d.\u0275\u0275advance(1),d.\u0275\u0275repeater(t.tickets)}}function dn(e,g){e&1&&(d.\u0275\u0275elementStart(0,"section",5),d.\u0275\u0275element(1,"ion-icon",6),d.\u0275\u0275elementStart(2,"span",7),d.\u0275\u0275text(3),d.\u0275\u0275pipe(4,"translate"),d.\u0275\u0275elementEnd()()),e&2&&(d.\u0275\u0275advance(3),d.\u0275\u0275textInterpolate(d.\u0275\u0275pipeBind1(4,1,"TICKETS.EMPTY_TICKET_LIST")))}function pn(e,g){e&1&&d.\u0275\u0275element(0,"app-loading")}var Zt=(()=>{class e{constructor(t,n){this.cdr=t,this.gameSrv=n,this.tickets=[],this.environment=C,this.loadingCount=0}ionViewDidEnter(){return u(this,null,function*(){yield this.getUserTickets(),this.sortTicketsByDate()})}sortTicketsByDate(){this.tickets.sort((t,n)=>{let i=new Date(t.ticket.date);return new Date(n.ticket.date).getTime()-i.getTime()}),this.cdr.detectChanges()}deleteTicketById(t){return u(this,null,function*(){t&&(yield this.getUserTickets())})}openGame(t){this.gameSrv.openGame(t)}getUserTickets(){return u(this,null,function*(){this.showLoading();try{this.tickets=yield this.gameSrv.getAllTicketsPrizesByUser(),this.requestHideLoading(),this.cdr.detectChanges()}catch{this.dismissLoading()}})}showLoading(){return u(this,null,function*(){let t=this.loadingCount;this.loadingCount++,t===0&&this.cdr.detectChanges()})}requestHideLoading(){return u(this,null,function*(){this.loadingCount--,this.loadingCount<=0&&this.dismissLoading()})}dismissLoading(){return u(this,null,function*(){this.loadingCount=0,this.cdr.detectChanges()})}static{this.\u0275fac=function(n){return new(n||e)(d.\u0275\u0275directiveInject(d.ChangeDetectorRef),d.\u0275\u0275directiveInject(E))}}static{this.\u0275cmp=d.\u0275\u0275defineComponent({type:e,selectors:[["app-tickets"]],standalone:!0,features:[d.\u0275\u0275StandaloneFeature],decls:4,vars:2,consts:[["padding","","color","light"],["class","ticket-list"],[1,"ticket-list"],[3,"data","click","deleteTicketEvent"],[3,"data"],[1,"empty-content"],["name","scan-circle-outline",1,"empty-content-icon"],[1,"empty-content-message"]],template:function(n,i){n&1&&(d.\u0275\u0275elementStart(0,"ion-content",0),d.\u0275\u0275template(1,mn,3,0,"ion-list",1)(2,dn,5,3)(3,pn,1,0,"app-loading"),d.\u0275\u0275elementEnd()),n&2&&(d.\u0275\u0275advance(1),d.\u0275\u0275conditional(1,i.tickets.length?1:2),d.\u0275\u0275advance(2),d.\u0275\u0275conditional(3,i.loadingCount>0?3:-1))},dependencies:[on,rn,an,F.IonContent,F.IonIcon,F.IonList,sn,Jt.TranslatePipe,nt,st],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]{height:100vh;width:100vw;padding-top:50px}[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]::part(scroll){overscroll-behavior:none;overflow:scroll}[_nghost-%COMP%]   .ticket-list[_ngcontent-%COMP%]{background-color:transparent;display:grid;gap:5px;grid-template-columns:repeat(auto-fit,minmax(350px,1fr));margin-bottom:150px}[_nghost-%COMP%]   .empty-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:300px}[_nghost-%COMP%]   .empty-content-icon[_ngcontent-%COMP%]{width:120px;height:120px;color:gray}[_nghost-%COMP%]   .empty-content-message[_ngcontent-%COMP%]{color:gray;margin:20px}"],changeDetection:0})}}return e})();import{CommonModule as un}from"@angular/common";import"@angular/core";import{IonicModule as gn}from"@ionic/angular";import{QrCodeModule as hn}from"ng-qrcode";import{RouterModule as fn}from"@angular/router";import{TranslateModule as Cn}from"@ngx-translate/core";import*as c from"@angular/core";import*as ct from"@ngx-translate/core";import*as v from"@ionic/angular";import*as Xt from"@angular/common";import*as te from"ng-qrcode";function vn(e,g){if(e&1&&c.\u0275\u0275element(0,"qr-code",8),e&2){let t=c.\u0275\u0275nextContext();c.\u0275\u0275property("value",t.qrUuid)}}function _n(e,g){if(e&1){let t=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"ion-item",9),c.\u0275\u0275listener("click",function(){c.\u0275\u0275restoreView(t);let i=c.\u0275\u0275nextContext();return c.\u0275\u0275resetView(i.deSyncDevice())}),c.\u0275\u0275elementStart(1,"ion-label",10),c.\u0275\u0275text(2),c.\u0275\u0275pipe(3,"translate"),c.\u0275\u0275elementEnd()()}e&2&&(c.\u0275\u0275advance(2),c.\u0275\u0275textInterpolate(c.\u0275\u0275pipeBind1(3,1,"UUID.DESYNC_DEVICE")))}var ee=(()=>{class e{constructor(t,n,i,m,h){this.cdr=t,this.uuidSrv=n,this.storageSrv=i,this.translateSrv=m,this.alertController=h,this.qrUuid="",this.languages=A,this.currentLanguage=A.EN,this.isSynced=!1}ionViewDidEnter(){this.initLogic()}changeLanguage(t){this.storageSrv.setItem(f.LANGUAGE,t),this.translateSrv.use(t),this.cdr.detectChanges()}deSyncDevice(){return u(this,null,function*(){(yield this.presentAlertConfirmDeSyncUuid())===y.ACCEPT&&(this.storageSrv.removeItem(f.APP_UUID),this.storageSrv.removeItem(f.APP_SYNC_MARK),this.isSynced=!1,yield this.uuidSrv.init(),setTimeout(()=>{this.initLogic()},400),this.cdr.detectChanges())})}initLogic(){this.qrUuid=I.UUID_QR_CODE+this.uuidSrv.getUuid(),this.isSynced=!!this.storageSrv.getItem(f.APP_SYNC_MARK),this.currentLanguage=this.storageSrv.getItem(f.LANGUAGE)||A.EN,this.cdr.detectChanges()}presentAlertConfirmDeSyncUuid(){return u(this,null,function*(){let t=yield this.alertController.create({header:this.translateSrv.instant("UUID.DESYNC_DEVICE"),subHeader:this.translateSrv.instant("GLOBAL.IRREVERSIBLE_ACTION"),message:this.translateSrv.instant("UUID.DESYNC_DEVICE_QUESTION"),buttons:[{text:this.translateSrv.instant("GLOBAL.CANCEL"),role:y.CANCEL,handler:()=>{}},{text:this.translateSrv.instant("GLOBAL.ACCEPT"),role:y.ACCEPT,handler:()=>{}}]});yield t.present();let{role:n}=yield t.onDidDismiss();return n})}static{this.\u0275fac=function(n){return new(n||e)(c.\u0275\u0275directiveInject(c.ChangeDetectorRef),c.\u0275\u0275directiveInject(O),c.\u0275\u0275directiveInject(k),c.\u0275\u0275directiveInject(ct.TranslateService),c.\u0275\u0275directiveInject(v.AlertController))}}static{this.\u0275cmp=c.\u0275\u0275defineComponent({type:e,selectors:[["app-menu"]],standalone:!0,features:[c.\u0275\u0275StandaloneFeature],decls:14,vars:12,consts:[["padding","","color","light"],[1,"menu-list"],[1,"menu-list-qr"],["size","300","errorCorrectionLevel","M",3,"value",4,"ngIf"],["interface","action-sheet",3,"label","value","ionChange"],["value","en"],["value","es"],["button",""],["size","300","errorCorrectionLevel","M",3,"value"],["button","",3,"click"],["color","danger"]],template:function(n,i){n&1&&(c.\u0275\u0275elementStart(0,"ion-content",0)(1,"ion-list",1)(2,"section",2),c.\u0275\u0275template(3,vn,1,1,"qr-code",3),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(4,"ion-item")(5,"ion-select",4),c.\u0275\u0275listener("ionChange",function(h){return i.changeLanguage(h.detail.value)}),c.\u0275\u0275pipe(6,"translate"),c.\u0275\u0275elementStart(7,"ion-select-option",5),c.\u0275\u0275text(8),c.\u0275\u0275pipe(9,"translate"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(10,"ion-select-option",6),c.\u0275\u0275text(11),c.\u0275\u0275pipe(12,"translate"),c.\u0275\u0275elementEnd()()(),c.\u0275\u0275template(13,_n,4,3,"ion-item",7),c.\u0275\u0275elementEnd()()),n&2&&(c.\u0275\u0275advance(3),c.\u0275\u0275property("ngIf",i.qrUuid),c.\u0275\u0275advance(2),c.\u0275\u0275propertyInterpolate("label",c.\u0275\u0275pipeBind1(6,6,"GLOBAL.LANGUAGES")),c.\u0275\u0275propertyInterpolate("value",i.currentLanguage),c.\u0275\u0275advance(3),c.\u0275\u0275textInterpolate(c.\u0275\u0275pipeBind1(9,8,"GLOBAL.ENGLISH")),c.\u0275\u0275advance(3),c.\u0275\u0275textInterpolate(c.\u0275\u0275pipeBind1(12,10,"GLOBAL.SPANISH")),c.\u0275\u0275advance(2),c.\u0275\u0275conditional(13,i.isSynced?13:-1))},dependencies:[un,Xt.NgIf,gn,v.IonContent,v.IonItem,v.IonLabel,v.IonList,v.IonSelect,v.IonSelectOption,v.SelectValueAccessor,fn,hn,te.QrCodeComponent,Cn,ct.TranslatePipe],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]{height:100vh;width:100vw;padding-top:50px}[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]::part(scroll){overscroll-behavior:none;overflow:scroll}[_nghost-%COMP%]   .menu-list-qr[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;margin:10px 0 30px}[_nghost-%COMP%]   .menu-list-option[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;align-items:flex-start}"],changeDetection:0})}}return e})();import{CommonModule as In}from"@angular/common";import"@angular/core";import{RouterModule as Tn}from"@angular/router";import{IonicModule as On}from"@ionic/angular";import{TranslateModule as En}from"@ngx-translate/core";import{CommonModule as yn}from"@angular/common";import"@angular/core";X();import{IonicModule as Sn}from"@ionic/angular";import{TranslateModule as xn}from"@ngx-translate/core";import*as o from"@angular/core";import"@angular/core";import*as ne from"@angular/core";var lt=(()=>{class e{constructor(){}getBestPrizes(t){return JSON.parse(t)}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275prov=ne.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();import*as mt from"@angular/common";import*as dt from"@ionic/angular";function bn(e,g){if(e&1&&(o.\u0275\u0275elementStart(0,"ion-item",8)(1,"ion-label",9)(2,"span",10),o.\u0275\u0275text(3),o.\u0275\u0275elementEnd()(),o.\u0275\u0275elementStart(4,"ion-label",11),o.\u0275\u0275text(5),o.\u0275\u0275pipe(6,"async"),o.\u0275\u0275pipe(7,"currency"),o.\u0275\u0275elementEnd()()),e&2){let t=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("ngClass","game-more-best-prize-first-number"),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate(t.bestGamePrizes.primerPremio.decimo),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngClass","game-more-best-prize-first-quantity"),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(o.\u0275\u0275pipeBind1(6,4,o.\u0275\u0275pipeBind2(7,6,t.bestGamePrizes.primerPremio.prize/100,"EUR")))}}function kn(e,g){if(e&1&&(o.\u0275\u0275elementStart(0,"ion-item",12)(1,"ion-label",9)(2,"span",10),o.\u0275\u0275text(3),o.\u0275\u0275elementEnd()(),o.\u0275\u0275elementStart(4,"ion-label",11),o.\u0275\u0275text(5),o.\u0275\u0275pipe(6,"async"),o.\u0275\u0275pipe(7,"currency"),o.\u0275\u0275elementEnd()()),e&2){let t=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("ngClass","game-more-best-prize-second-number"),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate(t.bestGamePrizes.segundoPremio.decimo),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngClass","game-more-best-prize-second-quantity"),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(o.\u0275\u0275pipeBind1(6,4,o.\u0275\u0275pipeBind2(7,6,t.bestGamePrizes.segundoPremio.prize/100,"EUR")))}}var Mn=(e,g)=>g.decimo;function wn(e,g){if(e&1&&(o.\u0275\u0275elementStart(0,"span",10),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),e&2){let t=g.$implicit;o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(t.decimo)}}function Pn(e,g){if(e&1&&(o.\u0275\u0275elementStart(0,"ion-item")(1,"ion-label",9),o.\u0275\u0275repeaterCreate(2,wn,2,1,"span",13,Mn),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(4,"ion-label",11),o.\u0275\u0275text(5),o.\u0275\u0275pipe(6,"async"),o.\u0275\u0275pipe(7,"currency"),o.\u0275\u0275elementEnd()()),e&2){let t=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("ngClass","game-more-best-prize-third-number"),o.\u0275\u0275advance(1),o.\u0275\u0275repeater(t.bestGamePrizes.reintegros),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngClass","game-more-best-prize-third-quantity"),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(o.\u0275\u0275pipeBind1(6,3,o.\u0275\u0275pipeBind2(7,5,t.bestGamePrizes.reintegros[0].prize/100,"EUR")))}}var pt=(()=>{class e{constructor(t){this.lnSrv=t,this.environment=C,this.gameCodes=b,this.bestGamePrizes={}}ngOnChanges(){this.getBestPrizes()}getBestPrizes(){this.bestGamePrizes=this.lnSrv.getBestPrizes(this.data.data.info.raw)}static{this.\u0275fac=function(n){return new(n||e)(o.\u0275\u0275directiveInject(lt))}}static{this.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["app-game-ln"]],inputs:{data:"data"},standalone:!0,features:[o.\u0275\u0275NgOnChangesFeature,o.\u0275\u0275StandaloneFeature],decls:13,vars:9,consts:[[1,"game"],[1,"row"],["aria-hidden","true","slot","start","alt","",1,"game-img",3,"src"],[1,"game-data"],["color","medium",1,"game-data-date"],[1,"game-more"],["class","game-more-best-prize-first"],["class","game-more-best-prize-second"],[1,"game-more-best-prize-first"],[3,"ngClass"],[1,"ball"],["slot","end",3,"ngClass"],[1,"game-more-best-prize-second"],["class","ball"]],template:function(n,i){n&1&&(o.\u0275\u0275elementStart(0,"section",0)(1,"article",1),o.\u0275\u0275element(2,"img",2),o.\u0275\u0275elementStart(3,"section",3)(4,"span",4),o.\u0275\u0275text(5),o.\u0275\u0275pipe(6,"async"),o.\u0275\u0275pipe(7,"date"),o.\u0275\u0275elementEnd()()(),o.\u0275\u0275elementStart(8,"article",1)(9,"section",5),o.\u0275\u0275template(10,bn,8,9,"ion-item",6)(11,kn,8,9,"ion-item",7)(12,Pn,8,8,"ion-item"),o.\u0275\u0275elementEnd()()()),n&2&&(o.\u0275\u0275advance(2),o.\u0275\u0275property("src",i.environment.web.host+"/assets/logos/games/"+i.data.code+".png",o.\u0275\u0275sanitizeUrl),o.\u0275\u0275advance(3),o.\u0275\u0275textInterpolate(o.\u0275\u0275pipeBind1(6,5,o.\u0275\u0275pipeBind1(7,7,i.data.date))),o.\u0275\u0275advance(5),o.\u0275\u0275conditional(10,i.bestGamePrizes.primerPremio?10:-1),o.\u0275\u0275advance(1),o.\u0275\u0275conditional(11,i.bestGamePrizes.segundoPremio?11:-1),o.\u0275\u0275advance(1),o.\u0275\u0275conditional(12,i.bestGamePrizes.reintegros?12:-1))},dependencies:[yn,mt.NgClass,mt.AsyncPipe,J,q,Sn,dt.IonItem,dt.IonLabel,xn],styles:["[_ngcontent-%COMP%]:root{--color-background: var(--ion-tab-bar-background, var(--ion-color-step-50, #f7f7f7));--box-shadow: rgba(99, 99, 99, .2) 0px 2px 8px 0px;--ion-color-primary: #3880ff;--ion-color-primary-rgb: 56,128,255;--ion-color-primary-contrast: #ffffff;--ion-color-primary-contrast-rgb: 255,255,255;--ion-color-primary-shade: #3171e0;--ion-color-primary-tint: #4c8dff;--ion-color-secondary: #3dc2ff;--ion-color-secondary-rgb: 61,194,255;--ion-color-secondary-contrast: #000000;--ion-color-secondary-contrast-rgb: 0,0,0;--ion-color-secondary-shade: #36abe0;--ion-color-secondary-tint: #50c8ff;--ion-color-tertiary: #5260ff;--ion-color-tertiary-rgb: 82,96,255;--ion-color-tertiary-contrast: #ffffff;--ion-color-tertiary-contrast-rgb: 255,255,255;--ion-color-tertiary-shade: #4854e0;--ion-color-tertiary-tint: #6370ff;--ion-color-success: #2dd36f;--ion-color-success-rgb: 45,211,111;--ion-color-success-contrast: #000000;--ion-color-success-contrast-rgb: 0,0,0;--ion-color-success-shade: #28ba62;--ion-color-success-tint: #42d77d;--ion-color-warning: #ffc409;--ion-color-warning-rgb: 255,196,9;--ion-color-warning-contrast: #000000;--ion-color-warning-contrast-rgb: 0,0,0;--ion-color-warning-shade: #e0ac08;--ion-color-warning-tint: #ffca22;--ion-color-danger: #eb445a;--ion-color-danger-rgb: 235,68,90;--ion-color-danger-contrast: #000000;--ion-color-danger-contrast-rgb: 0,0,0;--ion-color-danger-shade: #cf3c4f;--ion-color-danger-tint: #ed576b;--ion-color-light: #f4f5f8;--ion-color-light-rgb: 244,245,248;--ion-color-light-contrast: #000000;--ion-color-light-contrast-rgb: 0,0,0;--ion-color-light-shade: #d7d8da;--ion-color-light-tint: #f5f6f9;--ion-color-medium: #92949c;--ion-color-medium-rgb: 146,148,156;--ion-color-medium-contrast: #000000;--ion-color-medium-contrast-rgb: 0,0,0;--ion-color-medium-shade: #808289;--ion-color-medium-tint: #9d9fa6;--ion-color-dark: #222428;--ion-color-dark-rgb: 34,36,40;--ion-color-dark-contrast: #ffffff;--ion-color-dark-contrast-rgb: 255,255,255;--ion-color-dark-shade: #1e2023;--ion-color-dark-tint: #383a3e}[_nghost-%COMP%]{display:block;width:100%;height:272px;max-height:272px;min-height:272px}[_nghost-%COMP%]   .game[_ngcontent-%COMP%]{background-color:#fff;display:flex;flex-direction:column;align-items:flex-start;justify-content:flex-start;margin:15px;border-radius:7px;box-shadow:var(--box-shadow);padding:15px}[_nghost-%COMP%]   .game[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:flex-start;justify-content:flex-start;width:100%}[_nghost-%COMP%]   .game-img[_ngcontent-%COMP%]{width:50px;margin:0 15px 0 0}[_nghost-%COMP%]   .game-data[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%}[_nghost-%COMP%]   .game-data-date[_ngcontent-%COMP%]{margin-bottom:15px;text-align:right}[_nghost-%COMP%]   .game-more[_ngcontent-%COMP%]{width:100%;margin-top:15px}[_nghost-%COMP%]   .game-more[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]::part(native){padding:0}[_nghost-%COMP%]   .game-more[_ngcontent-%COMP%]   .ball[_ngcontent-%COMP%]{background:#3478b3;color:#fff;padding:5px 10px;border-radius:20px;margin-right:10px}[_nghost-%COMP%]   .game-more-best-prize-first-quantity[_ngcontent-%COMP%]{font-weight:700}"],changeDetection:0})}}return e})();import*as a from"@angular/core";import*as oe from"@angular/router";import*as gt from"@ionic/angular";import*as re from"@ngx-translate/core";var Dn=(e,g)=>g._id;function Ln(e,g){if(e&1&&a.\u0275\u0275element(0,"app-game-ln",7),e&2){let t=a.\u0275\u0275nextContext().$implicit;a.\u0275\u0275property("data",t)}}function An(e,g){if(e&1){let t=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"span",3),a.\u0275\u0275listener("click",function(){let m=a.\u0275\u0275restoreView(t).$implicit,h=a.\u0275\u0275nextContext(2);return a.\u0275\u0275resetView(h.openGame(m))}),a.\u0275\u0275template(1,Ln,1,1,"app-game-ln",7),a.\u0275\u0275elementEnd()}if(e&2){let t=g.$implicit,n=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(1),a.\u0275\u0275conditional(1,t.code===n.gamesCodes.LOTERIA_NACIONAL?1:-1)}}function Un(e,g){if(e&1){let t=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"section",2),a.\u0275\u0275repeaterCreate(1,An,2,1,"span",8,Dn),a.\u0275\u0275elementStart(3,"span",3),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(t);let i=a.\u0275\u0275nextContext();return a.\u0275\u0275resetView(i.loadMore())}),a.\u0275\u0275elementStart(4,"section",4)(5,"span",5),a.\u0275\u0275text(6),a.\u0275\u0275pipe(7,"translate"),a.\u0275\u0275elementEnd(),a.\u0275\u0275element(8,"ion-icon",6),a.\u0275\u0275elementEnd()()()}if(e&2){let t=a.\u0275\u0275nextContext();a.\u0275\u0275advance(1),a.\u0275\u0275repeater(t.games),a.\u0275\u0275advance(5),a.\u0275\u0275textInterpolate(a.\u0275\u0275pipeBind1(7,1,"GLOBAL.LOAD_MORE"))}}function Gn(e,g){e&1&&(a.\u0275\u0275elementStart(0,"section",9),a.\u0275\u0275element(1,"ion-icon",10),a.\u0275\u0275elementStart(2,"span",11),a.\u0275\u0275text(3),a.\u0275\u0275pipe(4,"translate"),a.\u0275\u0275elementEnd()()),e&2&&(a.\u0275\u0275advance(3),a.\u0275\u0275textInterpolate(a.\u0275\u0275pipeBind1(4,1,"GAMES.EMPTY_GAME_LIST")))}function Nn(e,g){e&1&&a.\u0275\u0275element(0,"app-loading")}var ut=10,ae=(()=>{class e{constructor(t,n,i){this.cdr=t,this.gameSrv=n,this.router=i,this.games=[],this.gamesCodes=b,this.loadingCount=0,this.limit=ut,this.offset=0}ionViewDidEnter(){return u(this,null,function*(){this.limit=ut,this.offset=0,this.games=[],yield this.getGamesByCodeOnlyWithPrizes(b.LOTERIA_NACIONAL),this.filterGamesWithPrizes(),this.sortGamesByDate(),this.cdr.detectChanges()})}openGame(t){this.gameSrv.openGame(t)}loadMore(){return u(this,null,function*(){this.limit+=ut,this.offset+=ut,yield this.getGamesByCodeOnlyWithPrizes(b.LOTERIA_NACIONAL)})}filterGamesWithPrizes(){this.games=this.games.filter(t=>t.data.info.prizes.length>0)}sortGamesByDate(){this.games.sort((t,n)=>{let i=new Date(t.date);return new Date(n.date).getTime()-i.getTime()})}getGamesByCodeOnlyWithPrizes(t){return u(this,null,function*(){try{this.showLoading();let n=yield this.gameSrv.getAllGamesByCodeOnlyWithPrizes(t,this.limit,this.offset);this.games=this.games.concat(n),this.cdr.detectChanges(),this.dismissLoading()}catch(n){console.log("Error getting games by code",n),this.dismissLoading()}})}showLoading(){return u(this,null,function*(){let t=this.loadingCount;this.loadingCount++,t===0&&this.cdr.detectChanges()})}requestHideLoading(){return u(this,null,function*(){this.loadingCount--,this.loadingCount<=0&&this.dismissLoading()})}dismissLoading(){return u(this,null,function*(){this.loadingCount=0,this.cdr.detectChanges()})}static{this.\u0275fac=function(n){return new(n||e)(a.\u0275\u0275directiveInject(a.ChangeDetectorRef),a.\u0275\u0275directiveInject(E),a.\u0275\u0275directiveInject(oe.Router))}}static{this.\u0275cmp=a.\u0275\u0275defineComponent({type:e,selectors:[["app-games"]],standalone:!0,features:[a.\u0275\u0275StandaloneFeature],decls:4,vars:2,consts:[["padding","","color","light"],["class","main-container"],[1,"main-container"],[1,"main-container-element",3,"click"],[1,"main-container-element-load-more"],[1,"main-container-element-load-more-icon"],["name","cloud-download-outline",1,"main-container-element-load-more-icon"],[3,"data"],["class","main-container-element"],[1,"empty-content"],["name","scan-circle-outline",1,"empty-content-icon"],[1,"empty-content-message"]],template:function(n,i){n&1&&(a.\u0275\u0275elementStart(0,"ion-content",0),a.\u0275\u0275template(1,Un,9,3,"section",1)(2,Gn,5,3)(3,Nn,1,0,"app-loading"),a.\u0275\u0275elementEnd()),n&2&&(a.\u0275\u0275advance(1),a.\u0275\u0275conditional(1,i.games.length?1:2),a.\u0275\u0275advance(2),a.\u0275\u0275conditional(3,i.loadingCount>0?3:-1))},dependencies:[In,Tn,On,gt.IonContent,gt.IonIcon,En,re.TranslatePipe,pt,st],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]{height:100vh;width:100vw;padding-top:50px}[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]::part(scroll){overscroll-behavior:none;overflow:scroll}[_nghost-%COMP%]   .main-container[_ngcontent-%COMP%]{display:grid;gap:5px;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));margin-bottom:150px}[_nghost-%COMP%]   .main-container-element[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;height:272px}[_nghost-%COMP%]   .main-container-element-load-more[_ngcontent-%COMP%]{justify-content:center;width:100%;background-color:var(--ion-color-primary);display:flex;flex-direction:column;align-items:center;margin:15px;border-radius:7px;box-shadow:var(--box-shadow);padding:15px;gap:15px}[_nghost-%COMP%]   .main-container-element-load-more-text[_ngcontent-%COMP%]{color:#fff;font-size:20px}[_nghost-%COMP%]   .main-container-element-load-more-icon[_ngcontent-%COMP%]{font-size:40px;color:#fff}[_nghost-%COMP%]   .empty-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:300px}[_nghost-%COMP%]   .empty-content-icon[_ngcontent-%COMP%]{width:120px;height:120px;color:gray}[_nghost-%COMP%]   .empty-content-message[_ngcontent-%COMP%]{color:gray;margin:20px}"],changeDetection:0})}}return e})();import{CommonModule as Bn}from"@angular/common";import"@angular/core";import{IonicModule as Rn}from"@ionic/angular";import{ScrollingModule as jn}from"@angular/cdk/scrolling";import{TranslateModule as Vn}from"@ngx-translate/core";import{FormsModule as zn}from"@angular/forms";import*as l from"@angular/core";import*as x from"@ionic/angular";import*as H from"@angular/forms";import*as kt from"@ngx-translate/core";import*as ht from"@angular/common";import*as $ from"@angular/cdk/scrolling";var Fn=()=>[ht.NgClass,ht.AsyncPipe,Promise.resolve().then(()=>(X(),Pt)).then(e=>e.CustomCurrencyPipe),x.IonItem,x.IonLabel,x.IonList,$.CdkFixedSizeVirtualScroll,$.CdkVirtualForOf,$.CdkVirtualScrollViewport,kt.TranslatePipe];function Hn(e,g){if(e&1&&l.\u0275\u0275element(0,"app-game-ln",2),e&2){let t=l.\u0275\u0275nextContext();l.\u0275\u0275property("data",t.game)}}function $n(e,g){if(e&1&&(l.\u0275\u0275elementStart(0,"ion-item",10)(1,"ion-label",11),l.\u0275\u0275text(2),l.\u0275\u0275pipe(3,"translate"),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(4,"ion-label",12),l.\u0275\u0275text(5),l.\u0275\u0275pipe(6,"async"),l.\u0275\u0275pipe(7,"currency"),l.\u0275\u0275elementEnd()()),e&2){let t=g.$implicit,n=g.$index;l.\u0275\u0275advance(1),l.\u0275\u0275property("ngClass","result-list-prize-number-"+n),l.\u0275\u0275advance(1),l.\u0275\u0275textInterpolate(l.\u0275\u0275pipeBind1(3,4,t.number)),l.\u0275\u0275advance(2),l.\u0275\u0275property("ngClass","result-list-prize-quantity-"+n),l.\u0275\u0275advance(1),l.\u0275\u0275textInterpolate(l.\u0275\u0275pipeBind1(6,6,l.\u0275\u0275pipeBind2(7,8,t.quantity/100,"EUR")))}}function Kn(e,g){if(e&1&&l.\u0275\u0275template(0,$n,8,11,"ion-item",9),e&2){let t=l.\u0275\u0275nextContext(2);l.\u0275\u0275property("cdkVirtualForOf",t.results)("cdkVirtualForTrack",t.result)}}function qn(e,g){if(e&1&&(l.\u0275\u0275elementStart(0,"cdk-virtual-scroll-viewport",6)(1,"ion-list",7),l.\u0275\u0275template(2,Kn,1,2,"ion-item",8),l.\u0275\u0275elementEnd()()),e&2){let t=l.\u0275\u0275nextContext();l.\u0275\u0275advance(2),l.\u0275\u0275conditional(2,t.results.length?2:-1)}}var se=(()=>{class e{constructor(t,n){this.cdr=t,this.lnSrv=n,this.debounce=1e3,this.minSearchLength=3,this.environment=C,this.game={},this.gameCodes=b,this.results=[],this.searchValue="",this.bestGamePrizes={}}ionViewDidEnter(){this.searchValue="",this.game=history.state.game,this.formatPrizesNumbers(),this.results=this.game.data.info.prizes,this.cdr.detectChanges()}formatPrizesNumbers(){this.game.data.info.prizes.forEach(t=>{t.number=t.number.padStart(5,"?")})}handleInput(t){this.searchValue=t.target.value.toLowerCase(),this.results=this.game.data.info.prizes.filter(m=>m.number.toLowerCase().indexOf(this.searchValue)>-1);let i=this.game.data.info.prizes.filter(m=>m.number.includes("?")).filter(m=>{let h=m.number.match(/\?/g)||[],_=m.number.slice(h.length),M=this.searchValue.slice(h.length);return _===M});this.results=Array.from(new Set([...this.results,...i]))}static{this.\u0275fac=function(n){return new(n||e)(l.\u0275\u0275directiveInject(l.ChangeDetectorRef),l.\u0275\u0275directiveInject(lt))}}static{this.\u0275cmp=l.\u0275\u0275defineComponent({type:e,selectors:[["app-game-detail"]],standalone:!0,features:[l.\u0275\u0275StandaloneFeature],decls:10,vars:6,consts:[[1,"container"],[1,"game"],[3,"data"],[1,"search"],["maxlength","5",3,"placeholder","ngModel","debounce","ionInput","ngModelChange"],["slot","start","name","search","aria-hidden","true"],["itemSize","50","minBufferPx","900","maxBufferPx","1350"],[1,"result-list"],["class","result-list-prize"],["class","result-list-prize",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrack"],[1,"result-list-prize"],[3,"ngClass"],["slot","end",3,"ngClass"]],template:function(n,i){n&1&&(l.\u0275\u0275elementStart(0,"ion-content",0)(1,"section",1),l.\u0275\u0275template(2,Hn,1,1,"app-game-ln",2),l.\u0275\u0275elementStart(3,"article",3)(4,"ion-input",4),l.\u0275\u0275listener("ionInput",function(h){return i.handleInput(h)})("ngModelChange",function(h){return i.searchValue=h}),l.\u0275\u0275pipe(5,"translate"),l.\u0275\u0275element(6,"ion-icon",5),l.\u0275\u0275elementEnd()(),l.\u0275\u0275template(7,qn,3,1),l.\u0275\u0275defer(8,7,Fn),l.\u0275\u0275deferOnIdle(),l.\u0275\u0275elementEnd()()),n&2&&(l.\u0275\u0275advance(2),l.\u0275\u0275conditional(2,i.game&&i.game._id?2:-1),l.\u0275\u0275advance(2),l.\u0275\u0275propertyInterpolate("placeholder",l.\u0275\u0275pipeBind1(5,4,"GLOBAL.SEARCH")),l.\u0275\u0275property("ngModel",i.searchValue)("debounce",i.debounce))},dependencies:[Bn,Rn,x.IonContent,x.IonIcon,x.IonInput,x.TextValueAccessor,jn,zn,H.NgControlStatus,H.MaxLengthValidator,H.NgModel,Vn,kt.TranslatePipe,pt],styles:["[_ngcontent-%COMP%]:root{--color-background: var(--ion-tab-bar-background, var(--ion-color-step-50, #f7f7f7));--box-shadow: rgba(99, 99, 99, .2) 0px 2px 8px 0px;--ion-color-primary: #3880ff;--ion-color-primary-rgb: 56,128,255;--ion-color-primary-contrast: #ffffff;--ion-color-primary-contrast-rgb: 255,255,255;--ion-color-primary-shade: #3171e0;--ion-color-primary-tint: #4c8dff;--ion-color-secondary: #3dc2ff;--ion-color-secondary-rgb: 61,194,255;--ion-color-secondary-contrast: #000000;--ion-color-secondary-contrast-rgb: 0,0,0;--ion-color-secondary-shade: #36abe0;--ion-color-secondary-tint: #50c8ff;--ion-color-tertiary: #5260ff;--ion-color-tertiary-rgb: 82,96,255;--ion-color-tertiary-contrast: #ffffff;--ion-color-tertiary-contrast-rgb: 255,255,255;--ion-color-tertiary-shade: #4854e0;--ion-color-tertiary-tint: #6370ff;--ion-color-success: #2dd36f;--ion-color-success-rgb: 45,211,111;--ion-color-success-contrast: #000000;--ion-color-success-contrast-rgb: 0,0,0;--ion-color-success-shade: #28ba62;--ion-color-success-tint: #42d77d;--ion-color-warning: #ffc409;--ion-color-warning-rgb: 255,196,9;--ion-color-warning-contrast: #000000;--ion-color-warning-contrast-rgb: 0,0,0;--ion-color-warning-shade: #e0ac08;--ion-color-warning-tint: #ffca22;--ion-color-danger: #eb445a;--ion-color-danger-rgb: 235,68,90;--ion-color-danger-contrast: #000000;--ion-color-danger-contrast-rgb: 0,0,0;--ion-color-danger-shade: #cf3c4f;--ion-color-danger-tint: #ed576b;--ion-color-light: #f4f5f8;--ion-color-light-rgb: 244,245,248;--ion-color-light-contrast: #000000;--ion-color-light-contrast-rgb: 0,0,0;--ion-color-light-shade: #d7d8da;--ion-color-light-tint: #f5f6f9;--ion-color-medium: #92949c;--ion-color-medium-rgb: 146,148,156;--ion-color-medium-contrast: #000000;--ion-color-medium-contrast-rgb: 0,0,0;--ion-color-medium-shade: #808289;--ion-color-medium-tint: #9d9fa6;--ion-color-dark: #222428;--ion-color-dark-rgb: 34,36,40;--ion-color-dark-contrast: #ffffff;--ion-color-dark-contrast-rgb: 255,255,255;--ion-color-dark-shade: #1e2023;--ion-color-dark-tint: #383a3e}[_nghost-%COMP%]{display:block}[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]{height:100vh;width:100vw;padding-top:50px}[_nghost-%COMP%]   cdk-virtual-scroll-viewport[_ngcontent-%COMP%]{height:100%;width:100%;overscroll-behavior:none;overflow:scroll}[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]::part(scroll){overscroll-behavior:none;overflow:scroll}[_nghost-%COMP%]   .game[_ngcontent-%COMP%]{display:flex;flex-direction:column;background-color:var(--color-background);box-shadow:#0000003d 0 3px 8px;width:100%;height:100%}[_nghost-%COMP%]   .game[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:flex-start;width:100%;padding:15px 15px 0}[_nghost-%COMP%]   .game[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{padding:0 15px;background-color:#fff;border-radius:100px;margin:0 15px 15px;border:thin solid var(--ion-color-dark)}[_nghost-%COMP%]   .game[_ngcontent-%COMP%]   .result-list[_ngcontent-%COMP%]{margin-bottom:56px;overflow-y:scroll;overscroll-behavior:none}[_nghost-%COMP%]   .game-img[_ngcontent-%COMP%]{width:50px;margin:0 15px 0 0}[_nghost-%COMP%]   .no-results[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:20px}"],changeDetection:0})}}return e})();var Ua=[{path:"",component:Qt,children:[{path:"",redirectTo:"main",pathMatch:"full"},{path:"main",component:$t,children:[{path:"games",component:ae},{path:"game-detail-ln",component:se},{path:"scan",component:zt},{path:"tickets",component:Zt},{path:"menu",component:ee}]}]}];export{Ua as routes};
